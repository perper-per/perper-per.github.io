<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Oi 按鈕</title>
    <script>
        let count = 0;

        // 按下按鈕，計算按下次數並自動複製字串
        function sendOi() {
            count++;
            document.getElementById("oi-count").innerText = `Oi 次數：${count}`;
            let oiText = "Oi".repeat(count); // 生成 Oi 字串

            // 將生成的 Oi 字串複製到剪貼簿
            navigator.clipboard.writeText(oiText).then(() => {
                console.log("Oi 已複製到剪貼簿");

                // 成功複製後再觸發分享
                shareOi(oiText);
            }).catch(err => {
                console.log('複製失敗', err);
                alert("無法複製 Oi 到剪貼簿，請手動複製。");
            });
        }

        // 呼叫分享面板
        function shareOi(oiText) {
            if (navigator.share) {
                navigator.share({
                    title: '分享 Oi',
                    text: oiText // 這裡的分享內容為多次 Oi 的字串
                })
                .then(() => console.log('分享成功'))
                .catch((error) => console.log('分享失敗', error));
            } else {
                alert("抱歉，您的裝置不支持分享功能");
            }
            count = 0; // 分享後將 Oi 次數重置
            document.getElementById("oi-count").innerText = `Oi 次數：0`;
        }
    </script>
</head>
<body>
    <h1>按下 Oi 按鈕！</h1>
    <button onclick="sendOi()">Oi</button>
    <p id="oi-count">Oi 次數：0</p>
</body>
</html>
